(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",850),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".game")&&(+sessionStorage.getItem("money")>=1?(document.querySelector(".block-bet__coins").textContent=1,sessionStorage.setItem("current-bet",1)):(document.querySelector(".block-bet__coins").textContent=0,sessionStorage.setItem("current-bet",0)));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper");function s(e,t){let o=(+sessionStorage.getItem("money")-e).toFixed(2);sessionStorage.setItem("money",o),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1500)}function n(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1e3)}function c(e,t){return Math.floor(Math.random()*(t-e)+e)}function a(){sessionStorage.getItem("bonus-1")||sessionStorage.setItem("bonus-1",0),sessionStorage.getItem("bonus-2")||sessionStorage.setItem("bonus-2",0),sessionStorage.getItem("bonus-3")||sessionStorage.setItem("bonus-3",0)}document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),a()),document.querySelector(".shop")&&document.querySelector(".preloader").classList.contains("_hide")&&document.querySelector(".shop").classList.add("_active");const r={field:document.querySelector(".field__items"),squares:[],program:1,count_win:0,start_count_tanks:20,remains_move:25};if(document.querySelector(".game")&&document.querySelector(".preloader").classList.contains("_hide")){document.querySelector(".game").classList.add("_active"),m(),l(i(20)),sessionStorage.getItem("army-tanks")||sessionStorage.setItem("army-tanks",20),document.querySelector(".objective__button-count").textContent=sessionStorage.getItem("army-tanks")}function l(e){document.querySelector(".field__item")&&document.querySelectorAll(".field__item").forEach((e=>e.remove())),e.forEach(((e,t)=>{let o;o=0==e?function(e){let t=document.createElement("div");t.classList.add("field__item"),t.classList.add("item-field"),t.dataset.number=e+1,t.dataset.object="0";let o=document.createElement("div");o.classList.add("item-field__body");let s=document.createElement("div");s.classList.add("item-field__cap");let n=document.createElement("div");n.classList.add("item-field__text"),n.textContent="miss",o.append(n,s);let c=u();return t.append(o,c),t}(t):function(e){let t=document.createElement("div");t.classList.add("field__item"),t.classList.add("item-field"),t.dataset.number=e+1;let o=document.createElement("div");o.classList.add("item-field__body");let s=document.createElement("div");s.classList.add("item-field__image");let n=c(1,3),a=document.createElement("img");a.setAttribute("src",`img/main/tank-${n}.svg`),s.append(a),t.dataset.object=n;let r=document.createElement("div");r.classList.add("item-field__circle");let l=document.createElement("div");l.classList.add("item-field__cap"),o.append(s,r,l);let i=u();return t.append(o,i),t}(t),r.field.appendChild(o),r.squares.push(o)}))}function i(e){let t=[];for(let o=0;o<e;o++)t.push(1);let o=25-t.length;for(let e=0;e<o;e++)t.push(0);return t=function(e){for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e}(t),t}function u(){let e=document.createElement("div");e.classList.add("item-field__target"),e.classList.add("target");let t=document.createElement("div");t.classList.add("target__body");let o=document.createElement("span"),s=document.createElement("span"),n=document.createElement("span"),c=document.createElement("span"),a=document.createElement("span");return t.append(o,s,n,c,a),e.append(t),e}function m(){document.querySelectorAll(".button-bonus__count").forEach((e=>{1==e.dataset.bonus&&(e.textContent=`x${sessionStorage.getItem("bonus-1")}`),2==e.dataset.bonus&&(e.textContent=`x${sessionStorage.getItem("bonus-2")}`),3==e.dataset.bonus&&(e.textContent=`x${sessionStorage.getItem("bonus-3")}`)}))}function d(e){e.classList.add("_hold"),setTimeout((()=>{e.classList.remove("_hold")}),2e3)}function _(e){console.log(e),0==e.dataset.object?+sessionStorage.getItem("bonus-1")>0?(setTimeout((()=>{sessionStorage.setItem("bonus-1",+sessionStorage.getItem("bonus-1")-1),m(),document.querySelectorAll(".bonuses__button").forEach((e=>{1==e.dataset.bonus&&e.classList.add("_anim")}))}),2e3),setTimeout((()=>{document.querySelectorAll(".bonuses__button").forEach((e=>{1==e.dataset.bonus&&e.classList.remove("_anim")}))}),3e3)):(setTimeout((()=>{r.program=3,S(),document.querySelectorAll(".bonuses__button").forEach((e=>e.classList.add("_hold")))}),2e3),setTimeout((()=>{document.querySelectorAll(".item-field__cap").forEach((e=>e.classList.add("_hide")))}),2500),document.querySelector(".field__items").classList.add("_hold"),setTimeout((()=>{r.program=2,S(),q()}),5e3)):(sessionStorage.setItem("army-tanks",+sessionStorage.getItem("army-tanks")-1),setTimeout((()=>{g(),y(),function(){let e=+sessionStorage.getItem("army-tanks"),t=f(e),o=f(e-1);document.querySelector(".information__number_3").textContent=o,document.querySelector(".actions-game__button-start_cash")&&(document.querySelector(".actions-game__button-start_cash").textContent=t);r.count_win=t,console.log(r.count_win)}()}),2500)),+sessionStorage.getItem("army-tanks")<=0&&setTimeout((()=>{document.querySelectorAll(".item-field__cap").forEach((e=>e.classList.add("_hide"))),document.querySelectorAll(".bonuses__bottom").forEach((e=>e.classList.add("_hold"))),setTimeout((()=>{b()}),3e3)}),4e3)}function b(){S(),document.querySelector(".field__items").classList.add("_hold"),console.log(`config.count_win - ${r.count_win}`),function(e,t,o,s){let n=+sessionStorage.getItem("money")+e;setTimeout((()=>{sessionStorage.setItem("money",n.toFixed(1)),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money"))),document.querySelectorAll(t).forEach((e=>e.classList.add("_anim-add-money")))}),o),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_anim-add-money")))}),s)}(+r.count_win,".check",1e3,2e3),setTimeout((()=>{r.count_win=0,r.start_count_tanks=20,r.remains_move=25,q()}),2e3)}function S(){if(1==r.program){console.log(`config.program - ${r.program}`),document.querySelector(".actions-game__button-start p").textContent="cash out",document.querySelector(".actions-game__button-start img").remove(),document.querySelector(".actions-game__button-start").classList.add("button_cash");let e=document.createElement("div");e.classList.add("actions-game__button-start_cash"),e.textContent="0",document.querySelector(".actions-game__button-start").append(e)}else if(2==r.program){document.querySelector(".actions-game__button-start").classList.contains("button_cash")&&document.querySelector(".actions-game__button-start").classList.remove("button_cash"),document.querySelector(".actions-game__button-start_cash")&&document.querySelector(".actions-game__button-start_cash").remove(),document.querySelector(".actions-game__button-start p").textContent="start game";let e=document.createElement("img");e.setAttribute("src","img/icons/icon-airpalne.svg"),e.setAttribute("alt","Icon"),document.querySelector(".actions-game__button-start").append(e),r.program=1}else 3==r.program&&document.querySelector(".actions-game__button-start_cash")&&document.querySelector(".actions-game__button-start_cash").remove()}function g(){document.querySelector(".information__number_1").textContent=sessionStorage.getItem("army-tanks")}function y(){let e=25-r.start_count_tanks;console.log(`config.start_count_tanks - ${r.start_count_tanks}`);let t=(e/r.remains_move*100).toFixed(1);document.querySelector(".information__number_2").textContent=`${t}%`}function f(e){let t=+sessionStorage.getItem("current-bet"),o=0;return 22==e?o=1*t:21==e?o=1.01*t:20==e?o=1.05*t:19==e?o=1.1*t:18==e?o=1.2*t:17==e?o=1.5*t:16==e?o=1.8*t:15==e?o=2*t:14==e?o=2.5*t:13==e?o=3*t:12==e?o=3.5*t:11==e?o=4*t:10==e?o=5*t:9==e?o=7*t:8==e?o=9*t:7==e?o=11*t:6==e?o=13*t:5==e?o=15*t:4==e?o=20*t:3==e?o=25*t:2==e?o=30*t:1==e?o=50*t:0==e&&(o=100*t),o.toFixed(1)}function q(){document.querySelector(".field__items").classList.add("_hold"),document.querySelector(".block-bet").classList.remove("_hold"),document.querySelector(".objective").classList.remove("_hold"),document.querySelectorAll(".information__number").forEach((e=>e.textContent=0)),sessionStorage.setItem("army-tanks",20),document.querySelector(".objective__button-count").textContent=sessionStorage.getItem("army-tanks"),document.querySelectorAll(".item-field__cap").forEach((e=>{e.classList.contains("_hide")&&e.classList.remove("_hide")}))}function h(e,t){setTimeout((()=>{e.classList.add("_hide")}),1800),_(t),r.remains_move--,document.querySelector(".field__items").classList.add("_hold"),setTimeout((()=>{document.querySelector(".field__items").classList.remove("_hold")}),2e3)}document.addEventListener("click",(e=>{let u=e.target,_=+sessionStorage.getItem("current-bet"),f=+sessionStorage.getItem("money");if(u.closest(".preloader__button")&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main").classList.add("_active"),a())),u.closest(".block-bet__minus")&&_>1&&(sessionStorage.setItem("current-bet",_-1),document.querySelector(".block-bet__coins_bet").textContent=sessionStorage.getItem("current-bet")),u.closest(".block-bet__plus")&&(f-1>_?(sessionStorage.setItem("current-bet",_+1),document.querySelector(".block-bet__coins_bet").textContent=sessionStorage.getItem("current-bet")):n(".check")),u.closest(".block-bet__min")&&(+sessionStorage.getItem("money")>=1?(sessionStorage.setItem("current-bet",1),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):n(".check")),u.closest(".block-bet__max")&&(+sessionStorage.getItem("money")>=1?(sessionStorage.setItem("current-bet",+sessionStorage.getItem("money")),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):n(".check")),u.closest(".button-bonus__btn-buy")&&1==u.closest(".button-bonus__btn-buy").dataset.shop&&(+sessionStorage.getItem("money")>=4.99?(sessionStorage.setItem("bonus-1",+sessionStorage.getItem("bonus-1")+1),s(4.99,".check")):n(".check")),u.closest(".button-bonus__btn-buy")&&2==u.closest(".button-bonus__btn-buy").dataset.shop&&(+sessionStorage.getItem("money")>=2.99?(sessionStorage.setItem("bonus-2",+sessionStorage.getItem("bonus-2")+1),s(2.99,".check")):n(".check")),u.closest(".button-bonus__btn-buy")&&3==u.closest(".button-bonus__btn-buy").dataset.shop&&(+sessionStorage.getItem("money")>=8.99?(sessionStorage.setItem("bonus-3",+sessionStorage.getItem("bonus-3")+1),s(8.99,".check")):n(".check")),u.closest(".objective__button_1")&&(document.querySelector(".objective__button-count").textContent=22,sessionStorage.setItem("army-tanks",22)),u.closest(".objective__button_2")&&(document.querySelector(".objective__button-count").textContent=20,sessionStorage.setItem("army-tanks",20)),u.closest(".objective__button_3")&&+sessionStorage.getItem("army-tanks")>1&&(sessionStorage.setItem("army-tanks",+sessionStorage.getItem("army-tanks")-1),document.querySelector(".objective__button-count").textContent=sessionStorage.getItem("army-tanks")),u.closest(".objective__button_5")&&+sessionStorage.getItem("army-tanks")<22&&(sessionStorage.setItem("army-tanks",+sessionStorage.getItem("army-tanks")+1),document.querySelector(".objective__button-count").textContent=sessionStorage.getItem("army-tanks")),u.closest(".objective__button_6")&&(document.querySelector(".objective__button-count").textContent=15,sessionStorage.setItem("army-tanks",15)),u.closest(".objective__button_7")&&(document.querySelector(".objective__button-count").textContent=5,sessionStorage.setItem("army-tanks",5)),u.closest(".bonuses__button")&&2==u.closest(".bonuses__button").dataset.bonus&&+sessionStorage.getItem("bonus-2")>0&&(sessionStorage.setItem("bonus-2",+sessionStorage.getItem("bonus-2")-1),m(),d(u.closest(".bonuses__button")),document.querySelectorAll(".bonuses__button").forEach((e=>{2==e.dataset.bonus&&e.classList.add("_anim-2")})),document.querySelector(".field__items").classList.add("_locator")),u.closest(".bonuses__button")&&3==u.closest(".bonuses__button").dataset.bonus&&+sessionStorage.getItem("bonus-3")>0){sessionStorage.setItem("bonus-3",+sessionStorage.getItem("bonus-3")-1),m(),d(u.closest(".bonuses__button"));let e=[];document.querySelectorAll(".field__item").forEach((t=>{t.classList.contains("_active")||0==t.dataset.object||e.push(t.dataset.number-1)})),setTimeout((()=>{document.querySelectorAll(".bonuses__button").forEach((e=>{3==e.dataset.bonus&&e.classList.add("_anim")}))}),2e3);let t=c(0,e.length),o=e[t];document.querySelectorAll(".field__item")[o].classList.add("_active"),h(document.querySelectorAll(".item-field__cap")[o],document.querySelectorAll(".field__item")[o])}if(u.closest(".actions-game__button-start")&&1==r.program&&(S(),document.querySelector(".block-bet").classList.add("_hold"),document.querySelector(".objective").classList.add("_hold"),l(i(+sessionStorage.getItem("army-tanks"))),r.start_count_tanks=+sessionStorage.getItem("army-tanks"),g(),y(),document.querySelectorAll(".bonuses__button").forEach((e=>e.classList.remove("_hold"))),s(+sessionStorage.getItem("current-bet"),".check"),document.querySelector(".field__items").classList.contains("_hold")&&document.querySelector(".field__items").classList.remove("_hold"),setTimeout((()=>{r.program=2}),1e3)),u.closest(".actions-game__button-start")&&2==r.program&&b(),u.closest(".field__item"))if(document.querySelector(".field__items").classList.contains("_locator")){document.querySelector(".field__items").classList.remove("_locator"),document.querySelectorAll(".bonuses__button").forEach((e=>{2==e.dataset.bonus&&e.classList.contains("_anim-2")&&e.classList.remove("_anim-2")}));let e=u.closest(".field__item").dataset.number-1;console.log(`Locator, number - ${e}`),e-6>=0&&0!=e&&5!=e&&10!=e&&15!=e&&20!=e&&(document.querySelectorAll(".item-field__cap")[e-6].classList.add("_locator"),setTimeout((()=>{document.querySelectorAll(".item-field__cap")[e-6].classList.remove("_locator")}),1500)),e-5>=0&&(document.querySelectorAll(".item-field__cap")[e-5].classList.add("_locator"),setTimeout((()=>{document.querySelectorAll(".item-field__cap")[e-5].classList.remove("_locator")}),1500)),e-4>=0&&4!=e&&9!=e&&14!=e&&19!=e&&24!=e&&(document.querySelectorAll(".item-field__cap")[e-4].classList.add("_locator"),setTimeout((()=>{document.querySelectorAll(".item-field__cap")[e-4].classList.remove("_locator")}),1500)),e-1>=0&&0!=e&&5!=e&&10!=e&&15!=e&&20!=e&&(document.querySelectorAll(".item-field__cap")[e-1].classList.add("_locator"),setTimeout((()=>{document.querySelectorAll(".item-field__cap")[e-1].classList.remove("_locator")}),1500)),document.querySelectorAll(".item-field__cap")[e].classList.add("_locator"),setTimeout((()=>{document.querySelectorAll(".item-field__cap")[e].classList.remove("_locator")}),1500),e+1<=24&&4!=e&&9!=e&&14!=e&&19!=e&&24!=e&&(document.querySelectorAll(".item-field__cap")[e+1].classList.add("_locator"),setTimeout((()=>{document.querySelectorAll(".item-field__cap")[e+1].classList.remove("_locator")}),1500)),e+4<=24&&0!=e&&5!=e&&10!=e&&15!=e&&20!=e&&(document.querySelectorAll(".item-field__cap")[e+4].classList.add("_locator"),setTimeout((()=>{document.querySelectorAll(".item-field__cap")[e+4].classList.remove("_locator")}),1500)),e+5<=24&&(document.querySelectorAll(".item-field__cap")[e+5].classList.add("_locator"),setTimeout((()=>{document.querySelectorAll(".item-field__cap")[e+5].classList.remove("_locator")}),1500)),e+6<=24&&4!=e&&9!=e&&14!=e&&19!=e&&24!=e&&(document.querySelectorAll(".item-field__cap")[e+6].classList.add("_locator"),setTimeout((()=>{document.querySelectorAll(".item-field__cap")[e+6].classList.remove("_locator")}),1500))}else u.closest(".field__item").classList.add("_active"),h(u.closest(".item-field__cap"),u.closest(".field__item"))})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();